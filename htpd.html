

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HTPD &mdash; proj.4 4.9.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="proj.4 4.9.3 documentation" href="index.html"/>
        <link rel="next" title="Threads" href="threads.html"/>
        <link rel="prev" title="License" href="license.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> proj.4
          

          
          </a>

          
            
            
              <div class="version">
                4.9.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="geodesic.html">Geodesic Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="grids.html">Grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">HTPD</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-and-building-htdp">Getting and building HTDP</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-crs2crs2grid-py">Getting crs2crs2grid.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="threads.html">Threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="projections/index.html">Projections</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">proj.4</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>HTPD</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="htpd">
<span id="id1"></span><h1>HTPD<a class="headerlink" href="#htpd" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#htpd" id="id2">HTPD</a><ul>
<li><a class="reference internal" href="#getting-and-building-htdp" id="id3">Getting and building HTDP</a></li>
<li><a class="reference internal" href="#getting-crs2crs2grid-py" id="id4">Getting crs2crs2grid.py</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#see-also" id="id6">See Also</a></li>
</ul>
</li>
</ul>
</div>
<p>This page documents use of the <cite>crs2crs2grid.py</cite> script and the HTDP
(Horizontal Time Dependent Positioning) grid shift modelling program from
NGS/NOAA to produce PROJ.4 compatible grid shift files for fine grade
conversions between various NAD83 epochs and WGS84.  Traditionally PROJ.4 has
treated NAD83 and WGS84 as equivalent and failed to distinguish between
different epochs or realizations of those datums.  At the scales of much
mapping this is adequate but as interest grows in high resolution imagery and
other high resolution mapping this is inadequate.  Also, as the North American
crust drifts over time the displacement between NAD83 and WGS84 grows (more
than one foot over the last two decades).</p>
<div class="section" id="getting-and-building-htdp">
<h2>Getting and building HTDP<a class="headerlink" href="#getting-and-building-htdp" title="Permalink to this headline">¶</a></h2>
<p>The HTDP modelling program is in written FORTRAN.  The source and documentation
can be found on the HTDP page at <a class="reference external" href="http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml">http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml</a></p>
<p>On linux systems it will be necessary to install <cite>gfortran</cite> or some FORTRAN
compiler.  For ubuntu something like the following should work.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>apt-get install gfortran
</pre></div>
</div>
<p>To compile the program do something like the following to produce the binary &#8220;htdp&#8221; from the source code.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>gfortran htdp.for -o htdp
</pre></div>
</div>
</div>
<div class="section" id="getting-crs2crs2grid-py">
<h2>Getting crs2crs2grid.py<a class="headerlink" href="#getting-crs2crs2grid-py" title="Permalink to this headline">¶</a></h2>
<p>The <cite>crs2crs2grid.py</cite> script can be found at
<a class="reference external" href="https://github.com/OSGeo/gdal/tree/trunk/gdal/swig/python/samples/crs2crs2grid.py">https://github.com/OSGeo/gdal/tree/trunk/gdal/swig/python/samples/crs2crs2grid.py</a></p>
<p>It depends on having the GDAL Python bindings operational.  If they are not
available you will get an error something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Traceback (most recent call last):
  File &quot;./crs2crs2grid.py&quot;, line 37, in &lt;module&gt;
    from osgeo import gdal, gdal_array, osr
ImportError: No module named osgeo
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span></span>   crs2crs2grid.py
           &lt;src_crs_id&gt; &lt;src_crs_date&gt; &lt;dst_crs_id&gt; &lt;dst_crs_year&gt;
           [-griddef &lt;ul_lon&gt; &lt;ul_lat&gt; &lt;ll_lon&gt; &lt;ll_lat&gt; &lt;lon_count&gt; &lt;lat_count&gt;]
           [-htdp &lt;path_to_exe&gt;] [-wrkdir &lt;dirpath&gt;] [-kwf]
           -o &lt;output_grid_name&gt;

-griddef: by default the following values for roughly the continental USA
          at a six minute step size are used:
          -127 50 -66 25 251 611
-kwf: keep working files in the working directory for review.
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span>crs2crs2grid.py 29 2002.0 8 2002.0 -o nad83_2002.ct2
</pre></div>
</div>
<p>The goal of <cite>crs2crs2grid.py</cite> is to produce a grid shift file for a designated
region.  The region is defined using the <cite>-griddef</cite> switch.  When missing a
continental US region is used.  The script creates a set of sample points for
the grid definition, runs the &#8220;htdp&#8221; program against it and then parses the
resulting points and computes a point by point shift to encode into the final
grid shift file.  By default it is assumed the <cite>htdp</cite> program will be in the
executable path.  If not, please provide the path to the executable using the
<cite>-htdp</cite> switch.</p>
<p>The <cite>htdp</cite> program supports transformations between many CRSes and for each (or
most?) of them you need to provide a date at which the CRS is fixed.  The full
set of CRS Ids available in the HTDP program are:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span> 1...NAD_83(2011) (North America tectonic plate fixed)
 29...NAD_83(CORS96)  (NAD_83(2011) will be used)
 30...NAD_83(2007)    (NAD_83(2011) will be used)
 2...NAD_83(PA11) (Pacific tectonic plate fixed)
 31...NAD_83(PACP00)  (NAD 83(PA11) will be used)
 3...NAD_83(MA11) (Mariana tectonic plate fixed)
 32...NAD_83(MARP00)  (NAD_83(MA11) will be used)

 4...WGS_72                             16...ITRF92
 5...WGS_84(transit) = NAD_83(2011)     17...ITRF93
 6...WGS_84(G730) = ITRF92              18...ITRF94 = ITRF96
 7...WGS_84(G873) = ITRF96              19...ITRF96
 8...WGS_84(G1150) = ITRF2000           20...ITRF97
 9...PNEOS_90 = ITRF90                  21...IGS97 = ITRF97
10...NEOS_90 = ITRF90                   22...ITRF2000
11...SIO/MIT_92 = ITRF91                23...IGS00 = ITRF2000
12...ITRF88                             24...IGb00 = ITRF2000
13...ITRF89                             25...ITRF2005
14...ITRF90                             26...IGS05 = ITRF2005
15...ITRF91                             27...ITRF2008
                                        28...IGS08 = ITRF2008
</pre></div>
</div>
<p>The typical use case is mapping from NAD83 on a particular date to WGS84 on
some date.  In this case the source CRS Id &#8220;29&#8221; (NAD_83(CORS96)) and the
destination CRS Id is &#8220;8 (WGS_84(G1150)).  It is also necessary to select the
source and destination date (epoch).  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>crs2crs2grid.py 29 2002.0 8 2002.0 -o nad83_2002.ct2
</pre></div>
</div>
<p>The output is a CTable2 format grid shift file suitable for use with PROJ.4
(4.8.0 or newer).  It might be utilized something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>cs2cs +proj=latlong +ellps=GRS80 +nadgrids=./nad83_2002.ct2 +to +proj=latlong +datum=WGS84
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml">http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml</a> - NGS/NOAA page about the HTDP
model and program.  Source for the HTDP program can be downloaded from here.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="threads.html" class="btn btn-neutral float-right" title="Threads" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="license.html" class="btn btn-neutral" title="License" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1986?-2016.
      Last updated on 02 Sep 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.9.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>